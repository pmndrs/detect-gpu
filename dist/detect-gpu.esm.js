// !! AUTO-GENERATED FILE - DO NOT EDIT !!
// Scraped from https://www.notebookcheck.net/
// Mobile GPU benchmark: https://www.notebookcheck.net/Mobile-Graphics-Cards-Benchmark-List.844.0.html?type=&sort=&professional=2&showClassDescription=1&deskornote=3&archive=1&perfrating=1&or=0&showBars=1&3dmark13_ice_gpu=1&3dmark13_cloud_gpu=1&3dmark13_fire_gpu=1&3dmark11_gpu=1&gpu_fullname=1&architecture=1&pixelshaders=1&vertexshaders=1&corespeed=1&boostspeed=1&memoryspeed=1&memorybus=1&memorytype=1&directx=1
// Desktop GPU benchmark: https://www.notebookcheck.net/Mobile-Graphics-Cards-Benchmark-List.844.0.html?type=&sort=&showClassDescription=1&deskornote=4&archive=1&perfrating=1&or=0&showBars=1&3dmark13_ice_gpu=1&3dmark13_cloud_gpu=1&3dmark13_fire_gpu=1&3dmark11_gpu=1&gpu_fullname=1&architecture=1&pixelshaders=1&vertexshaders=1&corespeed=1&boostspeed=1&memoryspeed=1&memorybus=1&memorytype=1&directx=1
const GPU_BENCHMARK_SCORE_DESKTOP = [
    '790 - AMD Radeon HD 7290',
    '780 - AMD Radeon HD 8180',
    '778 - AMD Radeon HD 7310',
    '776 - AMD Radeon HD 7340',
    '772 - Intel HD Graphics (Bay Trail)',
    '729 - Intel HD Graphics (Ivy Bridge)',
    '725 - AMD Radeon HD 8210',
    '701 - Intel HD Graphics (Cherry Trail)',
    '700 - AMD Radeon HD 8250',
    '699 - AMD Radeon R6 (Mullins)',
    '698 - AMD Radeon HD 8240',
    '690 - AMD Radeon HD 8280',
    '687 - AMD Radeon R2 (Mullins/Beema/Carrizo-L)',
    '665 - Intel HD Graphics (Haswell)',
    '656 - Intel HD Graphics 400 (Braswell)',
    '655 - Intel HD Graphics (Braswell)',
    '654 - Intel HD Graphics 405 (Braswell)',
    '634 - Intel HD Graphics 500',
    '633 - Intel UHD Graphics 600',
    '632 - AMD Radeon HD 8330',
    '631 - AMD Radeon HD 8350G',
    '618 - AMD Radeon HD 8400',
    '614 - AMD Radeon HD 8450G',
    '605 - Intel HD Graphics 4200',
    '604 - Intel HD Graphics (Broadwell)',
    '603 - AMD Radeon R2 (Stoney Ridge)',
    '602 - AMD Radeon R3 (Mullins/Beema)',
    '601 - AMD Radeon R4 (Kaveri)',
    '600 - AMD Radeon R4 (Beema)',
    '599 - AMD Radeon R5 (Beema/Carrizo-L)',
    '597 - AMD Radeon R4 (Stoney Ridge)',
    '593 - Intel HD Graphics 4000',
    '592 - AMD Radeon HD 7480D',
    '584 - Intel HD Graphics 5300',
    '583 - Intel HD Graphics 505',
    '582 - Intel UHD Graphics 605',
    '553 - Intel HD Graphics 510',
    '552 - AMD Radeon HD 8610G',
    '551 - Intel HD Graphics 610',
    '550 - Intel HD Graphics 4400',
    '549 - Intel HD Graphics 515',
    '541 - AMD Radeon HD 8470D',
    '532 - AMD Radeon HD 8550G',
    '516 - Intel HD Graphics 5000',
    '513 - AMD Radeon HD 7660G',
    '512 - NVIDIA GeForce 710M',
    '509 - AMD Radeon R5 (Kaveri)',
    '508 - AMD Radeon R5 (Carrizo)',
    '507 - Intel HD Graphics 615',
    '506 - Intel UHD Graphics 615',
    '505 - Intel UHD Graphics 617',
    '497 - Qualcomm Adreno 630',
    '494 - Intel HD Graphics 5500',
    '492 - Intel HD Graphics 4600',
    '488 - Intel Iris Graphics 5100',
    '486 - NVIDIA Quadro K610M',
    '485 - Intel HD Graphics 6000',
    '479 - AMD Radeon R5 (Stoney Ridge)',
    '478 - AMD Radeon R5 M420',
    '477 - AMD Radeon R5 M315',
    '475 - AMD Radeon R5 M320',
    '472 - NVIDIA GeForce GT 720M',
    '471 - Intel Iris Graphics 6100',
    '470 - Intel HD Graphics 520',
    '469 - NVIDIA GeForce 820M',
    '468 - NVIDIA GeForce 910M',
    '466 - AMD Radeon RX Vega 3',
    '465 - AMD Radeon R5 M255',
    '464 - AMD Radeon R5 M430',
    '463 - AMD Radeon R5 M330',
    '460 - AMD Radeon HD 7560D',
    '454 - AMD Radeon HD 8650G',
    '438 - NVIDIA Quadro K1000M',
    '436 - AMD Radeon HD 7660D',
    '435 - AMD Radeon R6 M255DX',
    '428 - Intel HD Graphics 5600',
    '418 - AMD FirePro W2100',
    '409 - AMD Radeon R6 (Kaveri)',
    '397 - Qualcomm Adreno 680',
    '396 - Qualcomm Adreno 685',
    '395 - AMD Radeon R6 (Carrizo)',
    '394 - Intel HD Graphics 620',
    '393 - Intel UHD Graphics 620',
    '392 - AMD Radeon R5 (Bristol Ridge)',
    '390 - Intel HD Graphics P530',
    '389 - Intel HD Graphics 530',
    '388 - Intel HD Graphics P630',
    '387 - Intel HD Graphics 630',
    '386 - Intel UHD Graphics P630',
    '385 - Intel UHD Graphics 630',
    '384 - Intel UHD Graphics G1 (Ice Lake 32 EU)',
    '383 - AMD Radeon RX Vega 6',
    '381 - AMD Radeon 610',
    '380 - AMD Radeon 520',
    '379 - AMD Radeon R7 M340',
    '372 - AMD Radeon R7 M440',
    '371 - AMD Radeon 620',
    '370 - AMD Radeon R8 M445DX',
    '367 - NVIDIA GeForce 920M',
    '365 - AMD Radeon R7 M360',
    '362 - AMD Radeon R7 M460',
    '360 - AMD Radeon R7 (Kaveri)',
    '359 - AMD Radeon R7 (Carrizo)',
    '358 - NVIDIA GeForce GT 640M',
    '357 - AMD Radeon R7 (Bristol Ridge)',
    '353 - AMD Radeon R7 M265',
    '349 - AMD FirePro M4100',
    '346 - NVIDIA GeForce GT 730M',
    '336 - AMD FirePro M4000',
    '334 - NVIDIA GeForce 825M',
    '332 - NVIDIA GeForce GT 735M',
    '329 - NVIDIA Quadro K2000M',
    '325 - Intel Iris Graphics 540',
    '324 - NVIDIA GeForce 920MX',
    '323 - Intel Iris Plus Graphics 640',
    '322 - NVIDIA GeForce MX110',
    '321 - NVIDIA GeForce 830M',
    '319 - Intel Iris Plus Graphics 645',
    '318 - AMD Radeon 625',
    '317 - AMD Radeon 530',
    '316 - Intel Iris Graphics 550',
    '315 - NVIDIA GeForce 930M',
    '314 - Intel Iris Plus Graphics 650',
    '313 - NVIDIA GeForce GT 740M',
    '312 - AMD Radeon R7 384 Cores (Kaveri Desktop)',
    '311 - Intel Iris Pro Graphics 5200',
    '310 - AMD Radeon R7 512 Cores (Kaveri Desktop)',
    '307 - NVIDIA GeForce GT 745M',
    '305 - NVIDIA GeForce 840M',
    '304 - NVIDIA Quadro M500M',
    '299 - AMD Radeon R7 M445',
    '298 - Intel Iris Plus Graphics 655',
    '297 - AMD Radeon R9 M375',
    '296 - AMD FirePro W4190M',
    '295 - NVIDIA Quadro M600M',
    '293 - NVIDIA GeForce 930MX',
    '292 - Intel Iris Plus Graphics G4 (Ice Lake 48 EU)',
    '291 - NVIDIA GeForce 940M',
    '290 - AMD Radeon RX Vega 8',
    '289 - NVIDIA Quadro K1100M',
    '288 - NVIDIA Quadro M520',
    '287 - NVIDIA GeForce 940MX',
    '286 - NVIDIA GeForce MX130',
    '285 - Intel Iris Pro Graphics 6200',
    '284 - NVIDIA GeForce GT 750M',
    '279 - AMD FirePro W4100',
    '278 - AMD FirePro W4170M',
    '276 - AMD Radeon R7 M465',
    '274 - AMD Radeon R9 M265X',
    '271 - NVIDIA GeForce 845M',
    '269 - NVIDIA GeForce GT 755M',
    '268 - AMD Radeon R7 250',
    '263 - NVIDIA Quadro K2100M',
    '262 - NVIDIA GeForce MX230',
    '261 - AMD FirePro M5100',
    '260 - AMD FirePro M6000',
    '258 - NVIDIA Quadro K3000M',
    '252 - AMD FirePro W5130M',
    '251 - NVIDIA Maxwell GPU Surface Book (940M, GDDR5)',
    '250 - AMD Radeon RX Vega 9',
    '244 - AMD Radeon R9 M370X',
    '243 - AMD FirePro W5170M',
    '242 - NVIDIA Quadro K3100M',
    '231 - AMD Radeon R9 M470',
    '226 - Intel Iris Pro Graphics 580',
    '225 - Intel Iris Pro Graphics P580',
    '224 - AMD Radeon RX Vega 10',
    '223 - Intel Iris Plus Graphics G7 (Ice Lake 64 EU)',
    '222 - NVIDIA Quadro P500',
    '221 - NVIDIA Quadro K4000M',
    '216 - NVIDIA GeForce 945M',
    '210 - AMD Radeon RX Vega 11',
    '209 - NVIDIA Quadro M620',
    '208 - NVIDIA Quadro M1000M',
    '207 - NVIDIA GeForce GTX 850M',
    '206 - NVIDIA Quadro P520',
    '205 - AMD Radeon R9 M385X',
    '204 - AMD Radeon R9 M470X',
    '203 - AMD Radeon Pro 450',
    '202 - NVIDIA GeForce GTX 950M',
    '194 - NVIDIA GeForce GTX 860M',
    '193 - AMD Radeon Pro WX 3100',
    '192 - AMD Radeon RX 540',
    '191 - AMD Radeon Pro WX 2100',
    '190 - AMD Radeon RX 540X',
    '188 - NVIDIA Quadro K4100M',
    '187 - NVIDIA Quadro K5000M',
    '186 - NVIDIA Quadro M2000M',
    '185 - NVIDIA GeForce MX150',
    '184 - NVIDIA GeForce MX250',
    '183 - NVIDIA Quadro P600',
    '182 - NVIDIA GeForce GT 1030 (Desktop)',
    '181 - AMD Radeon 630',
    '180 - AMD Radeon Pro 455',
    '179 - AMD Radeon Pro 555',
    '178 - AMD Radeon Pro 555X',
    '177 - AMD Radeon Pro WX 3200',
    '176 - AMD Radeon RX 640',
    '175 - AMD Radeon RX 550 (Laptop)',
    '174 - AMD Radeon RX 550X (Laptop)',
    '173 - NVIDIA Quadro P620',
    '172 - NVIDIA Quadro M1200',
    '167 - NVIDIA GeForce GTX 960M',
    '166 - AMD Radeon Pro WX 4130',
    '165 - AMD Radeon Pro 460',
    '164 - AMD Radeon Pro 560',
    '163 - AMD Radeon Pro 560X',
    '161 - AMD FirePro M6100',
    '160 - AMD Radeon R9 M390',
    '157 - AMD Radeon RX 460 (Laptop)',
    '150 - NVIDIA GeForce GTX 870M',
    '149 - NVIDIA Quadro M2200',
    '148 - AMD Radeon RX 560 (Laptop)',
    '147 - AMD Radeon RX 560X (Laptop)',
    '146 - NVIDIA GeForce GTX 965M',
    '144 - AMD Radeon Pro WX 4150',
    '143 - AMD Radeon RX 460 (Desktop)',
    '141 - NVIDIA Quadro P1000',
    '140 - NVIDIA Quadro K5100M',
    '136 - AMD Radeon R9 270X',
    '135 - NVIDIA GeForce GTX 950',
    '134 - NVIDIA GeForce GTX 1050 Max-Q',
    '133 - NVIDIA GeForce GTX 880M',
    '131 - AMD Radeon R7 370',
    '130 - AMD Radeon R9 M395',
    '129 - AMD FirePro W7170M',
    '128 - Intel Xe DG1 (iDG1LP) Mobile',
    '127 - NVIDIA GeForce GTX 1050 (Laptop)',
    '126 - NVIDIA GeForce GTX 1050 (Desktop)',
    '125 - NVIDIA Quadro M3000M',
    '122 - AMD Radeon R9 M485X',
    '121 - AMD Radeon Pro Vega 16',
    '120 - AMD Radeon Pro WX Vega M GL',
    '119 - AMD Radeon RX Vega M GL / 870',
    '118 - NVIDIA GeForce GTX 1050 Ti Max-Q',
    '117 - AMD Radeon R9 M395X',
    '112 - NVIDIA GeForce GTX 970M',
    '111 - NVIDIA Quadro M4000M',
    '110 - NVIDIA Quadro P2000 Max-Q',
    '109 - NVIDIA Quadro P2000',
    '108 - NVIDIA GeForce GTX 1050 Ti (Desktop)',
    '107 - NVIDIA GeForce GTX 1050 Ti (Laptop)',
    '106 - NVIDIA GeForce GTX 960',
    '105 - AMD Radeon R9 380',
    '104 - AMD Radeon R9 280X',
    '103 - NVIDIA Quadro M5000M',
    '102 - AMD Radeon Pro Vega 20',
    '101 - AMD Radeon RX Vega M GH',
    '100 - NVIDIA GeForce GTX 980M',
    '93 - AMD Radeon R9 290X',
    '90 - NVIDIA Quadro T1000 Max-Q',
    '89 - NVIDIA Quadro T1000 (Laptop)',
    '88 - NVIDIA GeForce GTX 1650 Max-Q',
    '87 - AMD Radeon RX 470 (Laptop)',
    '86 - AMD Radeon RX 570 (Laptop)',
    '85 - AMD Radeon RX 570X (Laptop)',
    '84 - AMD Radeon RX 470 (Desktop)',
    '83 - AMD Radeon Pro WX 7100',
    '81 - NVIDIA Quadro P3000 Max-Q',
    '80 - NVIDIA GeForce GTX 1060 Max-Q',
    '79 - NVIDIA GeForce GTX 1650 (Desktop)',
    '78 - NVIDIA GeForce GTX 1650 (Laptop)',
    '77 - NVIDIA GeForce GTX 970',
    '76 - NVIDIA Quadro P3000',
    '75 - AMD Radeon RX 5300M',
    '74 - AMD Radeon RX Vega Mobile',
    '72 - AMD Radeon RX 580 (Laptop)',
    '71 - AMD Radeon RX 580X (Laptop)',
    '70 - NVIDIA Quadro P3200',
    '69 - NVIDIA Quadro P4000 Max-Q',
    '68 - NVIDIA GeForce GTX 1060 (Laptop)',
    '67 - AMD Radeon RX 480 (Desktop)',
    '66 - NVIDIA GeForce GTX 1650 Ti (Desktop)',
    '65 - NVIDIA Quadro T2000 Max-Q',
    '64 - NVIDIA Quadro T2000 (Laptop)',
    '63 - NVIDIA Quadro P4000',
    '62 - AMD Radeon RX 570 (Desktop)',
    '61 - NVIDIA GeForce GTX 1060 (Desktop)',
    '59 - AMD Radeon R9 390X',
    '58 - NVIDIA Quadro M5500',
    '57 - NVIDIA GeForce GTX 980 (Laptop)',
    '56 - AMD Radeon RX 580 (Desktop)',
    '55 - AMD Radeon RX 590 (Desktop)',
    '54 - NVIDIA GeForce GTX 980',
    '53 - AMD Radeon R9 Nano',
    '52 - AMD Radeon R9 Fury',
    '50 - NVIDIA Quadro P5000 Max-Q',
    '49 - NVIDIA GeForce GTX 1660 Ti Max-Q',
    '48 - AMD Radeon RX 5500M',
    '47 - NVIDIA GeForce GTX 1070 Max-Q',
    '46 - NVIDIA GeForce GTX 980 Ti',
    '45 - NVIDIA GeForce GTX 1660 Ti (Laptop)',
    '44 - NVIDIA Quadro P5000',
    '43 - NVIDIA Quadro P4200',
    '42 - NVIDIA GeForce GTX 1660 Ti (Desktop)',
    '41 - NVIDIA GeForce GTX 1070 (Laptop)',
    '39 - AMD Radeon Pro Vega 56',
    '38 - NVIDIA GeForce GTX 1080 Max-Q',
    '37 - NVIDIA GeForce GTX 1070 (Desktop)',
    '36 - NVIDIA Quadro P5200',
    '34 - NVIDIA GeForce RTX 2060 (Laptop)',
    '33 - AMD Radeon RX Vega 56',
    '32 - NVIDIA Quadro RTX 3000 Max-Q',
    '31 - NVIDIA Quadro RTX 3000 (Laptop)',
    '30 - NVIDIA GeForce RTX 2070 Max-Q',
    '29 - NVIDIA GeForce GTX 1070 Ti (Desktop)',
    '28 - NVIDIA GeForce RTX 2060 (Desktop)',
    '27 - NVIDIA Quadro RTX 4000 Max-Q',
    '26 - NVIDIA Quadro RTX 4000 (Laptop)',
    '25 - NVIDIA GeForce GTX 1080 (Laptop)',
    '24 - AMD Radeon RX Vega 64',
    '23 - AMD Radeon RX 5700M',
    '22 - AMD Radeon RX 5700 (Desktop)',
    '21 - NVIDIA GeForce RTX 2060 Super',
    '20 - NVIDIA GeForce RTX 2070 (Laptop)',
    '19 - NVIDIA GeForce GTX 1080 (Desktop)',
    '18 - NVIDIA GeForce RTX 2070 (Desktop)',
    '17 - AMD Radeon RX 5700 XT (Desktop)',
    '16 - AMD Radeon VII',
    '15 - NVIDIA GeForce RTX 2070 Super',
    '14 - NVIDIA GeForce RTX 2080 Max-Q',
    '13 - NVIDIA GeForce GTX 1070 SLI (Laptop)',
    '12 - NVIDIA GeForce GTX 1070 SLI (Desktop)',
    '11 - NVIDIA GeForce GTX 1080 SLI (Laptop)',
    '10 - NVIDIA Titan X Pascal',
    '9 - NVIDIA GeForce GTX 1080 Ti (Desktop)',
    '8 - NVIDIA GeForce RTX 2080 (Laptop)',
    '7 - NVIDIA Quadro RTX 5000 Max-Q',
    '6 - NVIDIA Quadro RTX 5000 (Laptop)',
    '5 - NVIDIA GeForce RTX 2080 (Desktop)',
    '4 - NVIDIA GeForce RTX 2080 Super',
    '3 - NVIDIA Quadro RTX 6000 (Laptop)',
    '2 - NVIDIA GeForce RTX 2080 Ti (Desktop)',
    '1 - NVIDIA Titan RTX',
];
const GPU_BENCHMARK_SCORE_MOBILE = [
    '933 - ARM Mali-200',
    '932 - Qualcomm Adreno 200',
    '931 - PowerVR SGX530',
    '930 - PowerVR SGX531',
    '929 - PowerVR SGX535',
    '928 - Vivante GC800',
    '927 - Qualcomm Adreno 203',
    '926 - Qualcomm Adreno 205',
    '924 - PowerVR SGX540',
    '922 - NVIDIA GeForce ULP (Tegra 2)',
    '921 - ARM Mali-400 MP',
    '920 - ARM Mali-400 MP2',
    '919 - Vivante GC1000+ Dual-Core',
    '918 - Qualcomm Adreno 220',
    '917 - Broadcom VideoCore-IV',
    '916 - NVIDIA GeForce ULP (Tegra 3)',
    '915 - ARM Mali-400 MP4',
    '914 - Vivante GC4000',
    '913 - Qualcomm Adreno 225',
    '905 - Qualcomm Adreno 302',
    '904 - Vivante GC7000UL',
    '903 - ARM Mali-T720',
    '902 - Qualcomm Adreno 304',
    '901 - Qualcomm Adreno 305',
    '900 - Qualcomm Adreno 306',
    '899 - Qualcomm Adreno 308',
    '898 - PowerVR SGX544',
    '897 - ARM Mali-T720 MP2',
    '896 - PowerVR SGX544MP2',
    '895 - PowerVR SGX545',
    '892 - PowerVR SGX543MP2',
    '882 - PowerVR SGX543MP3',
    '874 - ARM Mali-T830 MP1',
    '873 - ARM Mali-450 MP4',
    '872 - ARM Mali-T720 MP4',
    '871 - PowerVR GE8100',
    '870 - PowerVR GE8300',
    '869 - PowerVR GE8320',
    '868 - ARM Mali-T760 MP2',
    '867 - Qualcomm Adreno 320',
    '866 - ARM Mali-T624',
    '865 - PowerVR SGX543MP4',
    '838 - ARM Mali-T830 MP2',
    '837 - Qualcomm Adreno 405',
    '836 - PowerVR G6200',
    '835 - NVIDIA GeForce Tegra 4',
    '830 - ARM Mali-T604 MP4',
    '824 - ARM Mali-T830 MP3',
    '823 - ARM Mali-T860 MP2',
    '819 - Qualcomm Adreno 504',
    '818 - Qualcomm Adreno 505',
    '817 - PowerVR GE8322 / IMG8322',
    '816 - Qualcomm Adreno 506',
    '815 - Qualcomm Adreno 508',
    '814 - Qualcomm Adreno 509',
    '813 - ARM Mali-T628 MP4',
    '812 - PowerVR SGX554MP4',
    '774 - ARM Mali-T760 MP4',
    '773 - ARM Mali-T628 MP6',
    '772 - Intel HD Graphics (Bay Trail)',
    '771 - PowerVR G6400',
    '770 - PowerVR GX6250',
    '769 - PowerVR G6430',
    '768 - Qualcomm Adreno 330',
    '767 - Qualcomm Adreno 510',
    '766 - Qualcomm Adreno 512',
    '765 - Qualcomm Adreno 610',
    '764 - Qualcomm Adreno 612',
    '701 - Intel HD Graphics (Cherry Trail)',
    '688 - ARM Mali-G51 MP4',
    '686 - Qualcomm Adreno 616',
    '685 - Qualcomm Adreno 618',
    '684 - Qualcomm Adreno 418',
    '664 - Qualcomm Adreno 420',
    '663 - PowerVR GX6450',
    '653 - ARM Mali-T880 MP2',
    '652 - ARM Mali-T760 MP6',
    '620 - ARM Mali-T880 MP4',
    '619 - ARM Mali-G72 MP3',
    '598 - Qualcomm Adreno 430',
    '595 - ARM Mali-G71 MP2',
    '594 - ARM Mali-T760 MP8',
    '548 - ARM Mali-G76 MP4',
    '547 - ARM Mali-T880 MP12',
    '546 - Apple A9 / PowerVR GT7600',
    '545 - NVIDIA Tegra K1 Kepler GPU',
    '544 - PowerVR GXA6850',
    '543 - Qualcomm Adreno 530',
    '504 - ARM Mali-G71 MP8',
    '503 - ARM Mali-G72 MP12',
    '502 - ARM Mali-G71 MP20',
    '501 - ARM Mali-G72 MP18',
    '500 - Qualcomm Adreno 540',
    '499 - ARM Mali-G76 MP10',
    '498 - ARM Mali-G76 MP12',
    '497 - Qualcomm Adreno 630',
    '496 - Qualcomm Adreno 640',
    '495 - ARM Mali-G76 MP16',
    '480 - Apple A10 Fusion GPU / PowerVR',
    '391 - NVIDIA Tegra X1 Maxwell GPU',
    '364 - Apple A9X / PowerVR Series 7XT',
    '328 - Apple A10X Fusion GPU / PowerVR',
    '327 - Apple A11 Bionic GPU',
    '326 - Apple A12 Bionic GPU',
    '320 - Apple A13 Bionic GPU',
    '294 - Apple A12X Bionic GPU',
];

const cleanEntryString = (entryString) => entryString
    .toLowerCase() // Lowercase all for easier matching
    .split('- ')[1] // Remove prelude score (`3 - `)
    .split(' /')[0]; // Reduce 'apple a9x / powervr series 7xt' to 'apple a9x'

const cleanRendererString = (rendererString) => {
    let cleanedRendererString = rendererString.toLowerCase();
    // Strip off ANGLE and Direct3D version
    if (cleanedRendererString.includes('angle (') && cleanedRendererString.includes('direct3d')) {
        cleanedRendererString = cleanedRendererString.replace('angle (', '').split(' direct3d')[0];
    }
    // Strip off the GB amount (1060 6gb was being concatenated to 10606 and because of it using the fallback)
    if (cleanedRendererString.includes('nvidia') && cleanedRendererString.includes('gb')) {
        cleanedRendererString = cleanedRendererString.split(/\dgb/)[0];
    }
    return cleanedRendererString;
};

// Get benchmark entry's by percentage of the total benchmark entries
const getBenchmarkByPercentage = (benchmark, percentages) => {
    let chunkOffset = 0;
    const benchmarkTiers = percentages.map((percentage) => {
        const chunkSize = Math.round((benchmark.length / 100) * percentage);
        const chunk = benchmark.slice(chunkOffset, chunkOffset + chunkSize);
        chunkOffset += chunkSize;
        return chunk;
    });
    return benchmarkTiers;
};

var DetectUA = /** @class */ (function () {
    /**
     * Detect a users browser, browser version and wheter it is a mobile-, tablet- or desktop device.
     *
     * @param forceUserAgent Force a user agent string (useful for testing)
     */
    function DetectUA(forceUserAgent) {
        // Internal cache, prevents from doing the same computations twice
        this.cache = new Map();
        this.userAgent = forceUserAgent
            ? forceUserAgent
            : window && window.navigator
                ? window.navigator.userAgent
                : '';
        this.android = !/like android/i.test(this.userAgent) && /android/i.test(this.userAgent);
        this.iOS = this.match(1, /(iphone|ipod|ipad)/i).toLowerCase();
        // Workaround for ipadOS, force detection as tablet
        // SEE: https://github.com/lancedikson/bowser/issues/329
        // SEE: https://stackoverflow.com/questions/58019463/how-to-detect-device-name-in-safari-on-ios-13-while-it-doesnt-show-the-correct
        if (navigator.platform === 'MacIntel' &&
            navigator.maxTouchPoints > 2 &&
            !window.MSStream) {
            this.iOS = 'ipad';
        }
    }
    /**
     * Match entry based on position found in the user-agent string
     *
     * @param pattern regular expression pattern
     */
    DetectUA.prototype.match = function (position, pattern) {
        var match = this.userAgent.match(pattern);
        return (match && match.length > 1 && match[position]) || '';
    };
    Object.defineProperty(DetectUA.prototype, "isMobile", {
        /**
         * Returns if the device is a mobile device
         */
        get: function () {
            var cached = this.cache.get('isMobile');
            if (cached !== undefined) {
                return cached;
            }
            else {
                if (
                // Default mobile
                !this.isTablet &&
                    (/[^-]mobi/i.test(this.userAgent) ||
                        // iPhone / iPod
                        this.iOS === 'iphone' ||
                        this.iOS === 'ipod' ||
                        // Android
                        this.android ||
                        // Nexus mobile
                        /nexus\s*[0-6]\s*/i.test(this.userAgent))) {
                    this.cache.set('isMobile', true);
                    return true;
                }
                this.cache.set('isMobile', false);
                return false;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetectUA.prototype, "isTablet", {
        /**
         * Returns if the device is a tablet device
         */
        get: function () {
            var cached = this.cache.get('isTablet');
            if (cached !== undefined) {
                return cached;
            }
            else {
                if (
                // Default tablet
                (/tablet/i.test(this.userAgent) && !/tablet pc/i.test(this.userAgent)) ||
                    // iPad
                    this.iOS === 'ipad' ||
                    // Android
                    (this.android && !/[^-]mobi/i.test(this.userAgent)) ||
                    // Nexus tablet
                    (!/nexus\s*[0-6]\s*/i.test(this.userAgent) && /nexus\s*[0-9]+/i.test(this.userAgent))) {
                    this.cache.set('isTablet', true);
                    return true;
                }
                this.cache.set('isTablet', false);
                return false;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetectUA.prototype, "isDesktop", {
        /**
         * Returns if the device is a desktop device
         */
        get: function () {
            var cached = this.cache.get('isDesktop');
            if (cached !== undefined) {
                return cached;
            }
            else {
                var result = !this.isMobile && !this.isTablet;
                this.cache.set('isDesktop', result);
                return result;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetectUA.prototype, "isMacOS", {
        /**
         * Returns if the device is running MacOS (and if so which version)
         */
        get: function () {
            var cached = this.cache.get('isMacOS');
            if (cached !== undefined) {
                return cached;
            }
            else {
                if (/macintosh/i.test(this.userAgent)) {
                    var getMacOSVersionName = function (version) {
                        var v = version
                            .split('.')
                            .splice(0, 2)
                            .map(function (s) { return parseInt(s, 10) || 0; });
                        v.push(0);
                        if (v[0] !== 10) {
                            return '';
                        }
                        switch (v[1]) {
                            case 5:
                                return 'Leopard';
                            case 6:
                                return 'Snow Leopard';
                            case 7:
                                return 'Lion';
                            case 8:
                                return 'Mountain Lion';
                            case 9:
                                return 'Mavericks';
                            case 10:
                                return 'Yosemite';
                            case 11:
                                return 'El Capitan';
                            case 12:
                                return 'Sierra';
                            case 13:
                                return 'High Sierra';
                            case 14:
                                return 'Mojave';
                            case 15:
                                return 'Catalina';
                            default:
                                return '';
                        }
                    };
                    var result = {
                        name: 'MacOS',
                        version: getMacOSVersionName(this.match(1, /mac os x (\d+(\.?_?\d+)+)/i).replace(/[_\s]/g, '.')),
                    };
                    return result;
                }
                this.cache.set('isMacOS', false);
                return false;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetectUA.prototype, "isWindows", {
        /**
         * Returns if the device is running Windows (and if so which version)
         */
        get: function () {
            var cached = this.cache.get('isWindows');
            if (cached !== undefined) {
                return cached;
            }
            else {
                if (/windows /i.test(this.userAgent)) {
                    var getWindowsVersionName = function (version) {
                        switch (version) {
                            case 'NT':
                                return 'NT';
                            case 'XP':
                                return 'XP';
                            case 'NT 5.0':
                                return '2000';
                            case 'NT 5.1':
                                return 'XP';
                            case 'NT 5.2':
                                return '2003';
                            case 'NT 6.0':
                                return 'Vista';
                            case 'NT 6.1':
                                return '7';
                            case 'NT 6.2':
                                return '8';
                            case 'NT 6.3':
                                return '8.1';
                            case 'NT 10.0':
                                return '10';
                            default:
                                return '';
                        }
                    };
                    var result = {
                        name: 'Windows',
                        version: getWindowsVersionName(this.match(1, /Windows ((NT|XP)( \d\d?.\d)?)/i)),
                    };
                    this.cache.set('isWindows', result);
                    return result;
                }
                this.cache.set('isWindows', false);
                return false;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetectUA.prototype, "isiOS", {
        /**
         * Returns if the device is an iOS device (and if so which version)
         */
        get: function () {
            var cached = this.cache.get('isiOS');
            if (cached !== undefined) {
                return cached;
            }
            else {
                if (this.iOS) {
                    var result = {
                        name: 'iOS',
                        version: this.match(1, /os (\d+([_\s]\d+)*) like mac os x/i).replace(/[_\s]/g, '.') ||
                            this.match(1, /version\/(\d+(\.\d+)?)/i),
                    };
                    this.cache.set('iOS', result);
                    return result;
                }
                else {
                    this.cache.set('iOS', false);
                    return false;
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetectUA.prototype, "isAndroid", {
        /**
         * Returns if the device is an Android device (and if so which version)
         */
        get: function () {
            var cached = this.cache.get('isAndroid');
            if (cached !== undefined) {
                return cached;
            }
            else {
                if (this.android) {
                    var result = {
                        name: 'Android',
                        version: this.match(1, /android[ \/-](\d+(\.\d+)*)/i),
                    };
                    this.cache.set('Android', result);
                    return result;
                }
                else {
                    return false;
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DetectUA.prototype, "browser", {
        /**
         * Returns the browser name and version
         */
        get: function () {
            var cached = this.cache.get('browser');
            if (cached !== undefined) {
                return cached;
            }
            else {
                var versionIdentifier = this.match(1, /version\/(\d+(\.\d+)?)/i);
                var result = void 0;
                if (/opera/i.test(this.userAgent)) {
                    // Opera
                    result = {
                        name: 'Opera',
                        version: versionIdentifier || this.match(1, /(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i),
                    };
                }
                else if (/opr\/|opios/i.test(this.userAgent)) {
                    // Opera
                    result = {
                        name: 'Opera',
                        version: this.match(1, /(?:opr|opios)[\s\/](\d+(\.\d+)?)/i) || versionIdentifier,
                    };
                }
                else if (/SamsungBrowser/i.test(this.userAgent)) {
                    // Samsung Browser
                    result = {
                        name: 'Samsung Internet for Android',
                        version: versionIdentifier || this.match(1, /(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i),
                    };
                }
                else if (/yabrowser/i.test(this.userAgent)) {
                    // Yandex Browser
                    result = {
                        name: 'Yandex Browser',
                        version: versionIdentifier || this.match(1, /(?:yabrowser)[\s\/](\d+(\.\d+)?)/i),
                    };
                }
                else if (/ucbrowser/i.test(this.userAgent)) {
                    // UC Browser
                    result = {
                        name: 'UC Browser',
                        version: this.match(1, /(?:ucbrowser)[\s\/](\d+(\.\d+)?)/i),
                    };
                }
                else if (/msie|trident/i.test(this.userAgent)) {
                    // Internet Explorer
                    result = {
                        name: 'Internet Explorer',
                        version: this.match(1, /(?:msie |rv:)(\d+(\.\d+)?)/i),
                    };
                }
                else if (/(edge|edgios|edga|edg)/i.test(this.userAgent)) {
                    // Edge
                    result = {
                        name: 'Microsoft Edge',
                        version: this.match(2, /(edge|edgios|edga|edg)\/(\d+(\.\d+)?)/i),
                    };
                }
                else if (/firefox|iceweasel|fxios/i.test(this.userAgent)) {
                    // Firefox
                    result = {
                        name: 'Firefox',
                        version: this.match(1, /(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i),
                    };
                }
                else if (/chromium/i.test(this.userAgent)) {
                    // Chromium
                    result = {
                        name: 'Chromium',
                        version: this.match(1, /(?:chromium)[\s\/](\d+(?:\.\d+)?)/i) || versionIdentifier,
                    };
                }
                else if (/chrome|crios|crmo/i.test(this.userAgent)) {
                    // Chrome
                    result = {
                        name: 'Chrome',
                        version: this.match(1, /(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i),
                    };
                }
                else if (/safari|applewebkit/i.test(this.userAgent)) {
                    // Safari
                    result = {
                        name: 'Safari',
                        version: versionIdentifier,
                    };
                }
                else {
                    // Everything else
                    result = {
                        name: this.match(1, /^(.*)\/(.*) /),
                        version: this.match(2, /^(.*)\/(.*) /),
                    };
                }
                this.cache.set('browser', result);
                return result;
            }
        },
        enumerable: true,
        configurable: true
    });
    return DetectUA;
}());

// Vendor
const device = new DetectUA();
const { browser, isMobile, isTablet, isDesktop } = device;

const getEntryVersionNumber = (entryString) => entryString.replace(/[\D]/g, ''); // Grab and concat all digits in the string

const getWebGLUnmaskedRenderer = (gl) => {
    const glExtensionDebugRendererInfo = gl.getExtension('WEBGL_debug_renderer_info');
    const renderer = glExtensionDebugRendererInfo &&
        gl.getParameter(glExtensionDebugRendererInfo.UNMASKED_RENDERER_WEBGL);
    return renderer;
};

const isWebGLSupported = ({ browser, }) => {
    const attributes = {
        alpha: false,
        antialias: false,
        depth: false,
        failIfMajorPerformanceCaveat: true,
        powerPreference: 'high-performance',
        stencil: false,
    };
    // Workaround for Safari 12
    // SEE: https://github.com/TimvanScherpenzeel/detect-gpu/issues/5
    if (typeof browser !== 'boolean' && browser.name === 'Safari' && browser.version.includes('12')) {
        delete attributes.powerPreference;
    }
    // Keep reference to the canvas and context in order to clean up
    // after the necessary information has been extracted
    const canvas = document.createElement('canvas');
    const gl = canvas.getContext('webgl', attributes) || canvas.getContext('experimental-webgl', attributes);
    if (!gl || !(gl instanceof WebGLRenderingContext)) {
        return;
    }
    return gl;
};

// Generated data
const getGPUTier = (options = {}) => {
    const mobileBenchmarkPercentages = options.mobileBenchmarkPercentages || [
        0,
        50,
        30,
        20,
    ];
    const desktopBenchmarkPercentages = options.desktopBenchmarkPercentages || [
        0,
        50,
        30,
        20,
    ];
    const forceRendererString = options.forceRendererString || '';
    const forceMobile = options.forceMobile || false;
    let renderer;
    let tier = '';
    let type = '';
    if (!forceRendererString) {
        const gl = options.glContext ||
            isWebGLSupported({
                browser,
            });
        if (!gl) {
            if (isMobile || isTablet || forceMobile) {
                return {
                    tier: 'GPU_MOBILE_TIER_0',
                    type: 'WEBGL_UNSUPPORTED',
                };
            }
            return {
                tier: 'GPU_DESKTOP_TIER_0',
                type: 'WEBGL_UNSUPPORTED',
            };
        }
        renderer = getWebGLUnmaskedRenderer(gl);
    }
    else {
        renderer = forceRendererString;
    }
    renderer = cleanRendererString(renderer);
    const rendererVersionNumber = renderer.replace(/[\D]/g, '');
    // GPU BLACKLIST
    // https://wiki.mozilla.org/Blocklisting/Blocked_Graphics_Drivers
    // https://www.khronos.org/webgl/wiki/BlacklistsAndWhitelists
    // https://chromium.googlesource.com/chromium/src/+/master/gpu/config/software_rendering_list.json
    // https://chromium.googlesource.com/chromium/src/+/master/gpu/config/gpu_driver_bug_list.json
    const isGPUBlacklisted = /(radeon hd 6970m|radeon hd 6770m|radeon hd 6490m|radeon hd 6630m|radeon hd 6750m|radeon hd 5750|radeon hd 5670|radeon hd 4850|radeon hd 4870|radeon hd 4670|geforce 9400m|geforce 320m|geforce 330m|geforce gt 130|geforce gt 120|geforce gtx 285|geforce 8600|geforce 9600m|geforce 9400m|geforce 8800 gs|geforce 8800 gt|quadro fx 5|quadro fx 4|radeon hd 2600|radeon hd 2400|radeon hd 2600|mali-4|mali-3|mali-2)/.test(renderer);
    if (isGPUBlacklisted) {
        if (isMobile || isTablet || forceMobile) {
            return {
                tier: 'GPU_MOBILE_TIER_0',
                type: 'BLACKLISTED',
            };
        }
        return {
            tier: 'GPU_DESKTOP_TIER_0',
            type: 'BLACKLISTED',
        };
    }
    if (isMobile || isTablet || forceMobile) {
        const mobileBenchmark = getBenchmarkByPercentage(GPU_BENCHMARK_SCORE_MOBILE, mobileBenchmarkPercentages);
        const isRendererAdreno = renderer.includes('adreno');
        const isRendererApple = renderer.includes('apple');
        const isRendererMali = renderer.includes('mali') && !renderer.includes('mali-t');
        const isRendererMaliT = renderer.includes('mali-t');
        const isRendererNVIDIA = renderer.includes('nvidia');
        const isRendererPowerVR = renderer.includes('powervr');
        mobileBenchmark.forEach((benchmarkTier, index) => benchmarkTier.forEach((benchmarkEntry) => {
            const entry = cleanEntryString(benchmarkEntry);
            const entryVersionNumber = getEntryVersionNumber(entry);
            if ((entry.includes('adreno') && isRendererAdreno) ||
                (entry.includes('apple') && isRendererApple) ||
                (entry.includes('mali') && !entry.includes('mali-t') && isRendererMali) ||
                (entry.includes('mali-t') && isRendererMaliT) ||
                (entry.includes('nvidia') && isRendererNVIDIA) ||
                (entry.includes('powervr') && isRendererPowerVR)) {
                if (entryVersionNumber.includes(rendererVersionNumber)) {
                    tier = `GPU_MOBILE_TIER_${index}`;
                    type = `BENCHMARK - ${entry}`;
                }
                // Handle mobile edge cases
            }
        }));
        if (!tier) {
            tier = 'GPU_MOBILE_TIER_1';
            type = 'FALLBACK';
        }
        return {
            tier,
            type,
        };
    }
    if (isDesktop) {
        const desktopBenchmark = getBenchmarkByPercentage(GPU_BENCHMARK_SCORE_DESKTOP, desktopBenchmarkPercentages);
        const isRendererIntel = renderer.includes('intel');
        const isRendererAMD = renderer.includes('amd');
        const isRendererNVIDIA = renderer.includes('nvidia');
        desktopBenchmark.forEach((benchmarkTier, index) => benchmarkTier.forEach((benchmarkEntry) => {
            const entry = cleanEntryString(benchmarkEntry);
            const entryVersionNumber = getEntryVersionNumber(entry);
            if ((entry.includes('intel') && isRendererIntel) ||
                (entry.includes('amd') && isRendererAMD) ||
                (entry.includes('nvidia') && isRendererNVIDIA)) {
                if (entryVersionNumber.includes(rendererVersionNumber)) {
                    tier = `GPU_DESKTOP_TIER_${index}`;
                    type = `BENCHMARK - ${entry}`;
                }
                // Handle desktop edge cases
            }
        }));
        if (!tier) {
            tier = 'GPU_DESKTOP_TIER_1';
            type = 'FALLBACK';
        }
        return {
            tier,
            type,
        };
    }
    return {
        tier,
        type,
    };
};

export { getGPUTier };
